# Vue**模板编译原理**

vue中的模板 template 无法被游览器解析并渲染，因为这不属于游览器的标准，不是正确的HTML语法，所有需要将 template 转化一个 JavaScript 函数，这样游览器就可以执行这个函数并渲染对应的HTML 元素，就可以让视图跑进去了，这个转化的过程，就是模板编译。模板编译又分三个阶段，解析parse，优化optimize，生成generate，最终生成可执行函数render

- **解析阶段：**使用大量的正则表达式对template字符串进行解析，将标签、指令、属性等转化为抽象语法树AST。
- **优化阶段**：遍历AST，找到其中的一些静态节点并进行标记，方便在页面重渲染的时候进行diff比较时，直接跳过这一些静态节点，优化runtime的性能。
- **生成阶段**：将最终的AST转化为render函数字符串。

